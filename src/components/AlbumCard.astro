---
import { cfImageUrl } from '../utils/cfImages';

const { album } = Astro.props;
const albumDate = album.date ? new Date(album.date) : null;
const yearLabel = albumDate ? albumDate.getUTCFullYear() : 'Album';
---

<a class="card" href={`/albums/${album.slug}`}>
  <img
    src={cfImageUrl(album.coverKey, { width: 700, quality: 75 })}
    alt={`${album.title} cover`}
    loading="lazy"
    decoding="async"
    width="700"
    height="467"
  />
  <div class="card-body">
    <div class="badge">{yearLabel}</div>
    <h3 style="margin-top: 0.75rem;">{album.title}</h3>
    {albumDate && (
      <p style="color: var(--muted); margin-top: 0.5rem;">
        {albumDate.toLocaleDateString('en-US', { month: 'long', day: '2-digit', year: 'numeric', timeZone: 'UTC' })}
      </p>
    )}
  </div>
</a>
